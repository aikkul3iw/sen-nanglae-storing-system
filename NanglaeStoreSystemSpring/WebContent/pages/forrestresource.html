<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title></title>

    <!-- Bootstrap Core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <link href="../vendor/datatables-plugins/dataTables.bootstrap.css" rel="stylesheet">

    <!-- DataTables Responsive CSS -->
    <link href="../vendor/datatables-responsive/dataTables.responsive.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<script type='text/javascript' src="../js/jquery.js"></script>
<script type='text/javascript'>
	function listForest() {
		$("#loader").show();
		$.ajax({
			url : "../listForest.do",
			type : "POST",
			success : function(data) {
				var html = '';
				html += "<thead>";
				html += "<tr>";
				html += "<th>ปีข้อมูล</th><th>ป่าไม้</th><th>ที่ตั้ง</th><th>การใช้ประโยนช์</th><th colspan='2'>ตัวเลือก</th>";
				html += "</tr>";
				html += "</thead>";
				html += "<tbody>";
				for (var i = 0; i < data.length; i++) {
					html += "<tr>";
					
					html += "<td>" + data[i].frs_year + "</td>" + "<td>"
							+ data[i].frs_name + "</td>" + "<td>"
							+ "หมู่ที่ "+data[i].location.vil_number+" บ้าน"+data[i].location.vil_name + "</td>"+ "<td>"
							+ data[i].frs_usage + "</td>" 
							+ "<td><a href onclick=\"deleteForest("
							+ data[i].frs_id + ");\" >ลบข้อมูล</a></td>"
							+ "<td><a href=\"#editForest\" data-toggle=\"tab\" onclick=\"setEditForest("
							+ data[i].frs_id + ");\" >แก้ไข</a></td>";
					html += "</tr>";
				}
				html += "<tbody>";
				$('#resultTable').html(html);
				$("#loader").hide();
			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
</script>
<script type='text/javascript'>
	function createForest() {
		$("#loader").show();
		if ($('#frs_year').val() == "") {
			document.getElementById('frs_year').style.borderColor = "red";
			return false;
		} else if ($('#frs_name').val() == "") {
			document.getElementById('frs_name').style.borderColor = "red";
			return false;
		} else if ($('#frs_usage').val() == "") {
			document.getElementById('frs_usage').style.borderColor = "red";
			return false;
		}  else {
		var obj = {
			frs_id : 0,
			frs_year : $('#frs_year').val(),
			frs_name : $('#frs_name').val(),
			frs_usage : $('#frs_usage').val()

		};
		//alert(JSON.stringify(obj));
		$.ajax({
			url : "../saveForest.do?id=" + $("#villageSelect").val(),
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				//alert('success');
				$("#loader").hide();
				location.reload();
			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
		}
	}
	function listVillage() {
		$("#loader").show();
		$.ajax({
			url : "../listVillage.do",
			type : "POST",
			success : function(data) {
				var html = '';
				for (var i = 0; i < data.length; i++) {
					html += "<option value=\""+data[i].vil_id+"\">"
							+ data[i].vil_name + "</option>";
				}
				$('#villageSelect').html(html);

			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
	function deleteForest(id) {
		var obj = {
			frs_id : id

		};
		//alert(id);
		//alert(JSON.stringify(obj));
		$.ajax({
			url : "../deleteForest.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				location.reload();
			}
		});
	}
	function editForest() {
		var obj = {
			frs_id : $("#editFrsId").val(),
			frs_year : $('#editFrsYear').val(),
			frs_name : $('#editFrsName').val(),
			frs_usage : $('#editFrsUsage').val()
			
		};
		//alert(JSON.stringify(obj));
		$.ajax({
			url : "../saveForest.do?id=" + $("#editVillageSelect").val(),
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				//alert('success');
				location.reload();
			},
			error : function(data, status, er) {
				alert('error');
			}
		});
	}
	function setEditForest(frs_id) {

		var obj = {
			frs_id : frs_id
		};

		$.ajax({
			url : "../findForest.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				//alert(JSON.stringify(data));
				$("#editFrsId").val(data.frs_id);
				$("#editFrsYear").val(data.frs_year);
				$("#editFrsName").val(data.frs_name);
				$("#editFrsUsage").val(data.frs_usage);
				
			},
			error : function(data, status, er) {
				alert('error');
			}
		});
	}
	function editVillageSelect() {
		$("#loader").show();
		$.ajax({
			url : "../listVillage.do",
			type : "POST",
			success : function(data) {
				var html = '';
				for (var i = 0; i < data.length; i++) {
					html += "<option value=\""+data[i].vil_id+"\">"
							+ data[i].vil_name + "</option>";
				}
				$('#editVillageSelect').html(html);

			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
</script>
</head>

<body onload="listForest();listVillage();editVillageSelect();">

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">เทศบาลตำบลนางแล</a>
            </div>
            <!-- /.navbar-header -->

            <ul class="nav navbar-top-links navbar-right">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Smith</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Smith</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Smith</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>Read All Messages</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-messages -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-tasks">
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 1</strong>
                                        <span class="pull-right text-muted">40% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                            <span class="sr-only">40% Complete (success)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 2</strong>
                                        <span class="pull-right text-muted">20% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                                            <span class="sr-only">20% Complete</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 3</strong>
                                        <span class="pull-right text-muted">60% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                            <span class="sr-only">60% Complete (warning)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 4</strong>
                                        <span class="pull-right text-muted">80% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                                            <span class="sr-only">80% Complete (danger)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>See All Tasks</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-tasks -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-comment fa-fw"></i> New Comment
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                    <span class="pull-right text-muted small">12 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-envelope fa-fw"></i> Message Sent
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-tasks fa-fw"></i> New Task
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>See All Alerts</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-alerts -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> ดูข้อมูลส่วนตัว</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> ตั้งค่า</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> ออกจากระบบ</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li>
                            <a href="#"><i class="fa fa-child fa-fw"></i> บุคคล<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="personnel.html">บุคลากร</a>
                                </li>
                                <li>
                                    <a href="population.html">ประชากร</a>
                                </li>
                                <li>
                                    <a href="labor.html">แรงงาน</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-road fa-fw"></i> สาธารณูปโภค<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="transport.html">ระบบคมนาคมขนส่ง</a>
                                </li>
                                <li>
                                    <a href="electric.html">ระบบไฟฟ้า</a>
                                </li>
                                <li>
                                    <a href="pipeline.html">ระบบประปา</a>
                                </li>
                                <li>
                                    <a href="drainange.html">ระบบระบายน้ำ</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-home fa-fw"></i> สาธารณุปการ<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="#">เคหะ<span class="fa arrow"></span></a>
                                    <ul class="nav nav-third-level">
                                        <li>
                                            <a href="village.html">หมู่บ้าน</a>
                                        </li>
                                        <li>
                                            <a href="industry.html">การอุตสาหกรรม</a>
                                        </li>
                                        <li>
                                            <a href="education.html">การศึกษา</a>
                                        </li>
                                        <li>
                                            <a href="religion.html">การศาสนา</a>
                                        </li>
                                        <li>
                                            <a href="commerce.html">การพาณิชย์</a>
                                        </li>
                                        <li>
                                            <a href="tourism.html">แหล่งท่องเที่ยว</a>
                                        </li>
                                    </ul>
                                    <!-- /.nav-third-level -->
                                </li>
                                <li>
                                    <a href="#">บริการ<span class="fa arrow"></span></a>
                                    <ul class="nav nav-third-level">
                                        <li>
                                            <a href="health.html">การสาธารสุข</a>
                                        </li>
                                        <li>
                                            <a href="security.html">ความปลอดภัยในชีวิตและทรัพย์สิน</a>
                                        </li>
                                        <li>
                                            <a href="group.html">กลุ่มในชุมชน</a>
                                        </li>
                                        <li>
                                            <a href="service.html">ศูนย์บริการประชาชน</a>
                                        </li>
                                        <li>
                                            <a href="inventory.html">การคลัง</a>
                                        </li>
                                    </ul>
                                    <!-- /.nav-third-level -->
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="#"><i class="glyphicon glyphicon-leaf"></i> ธรรมชาติและสิ่งแวดล้อม<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="agriculture.html">การเกษตรกรรม</a>
                                </li>
                                <li>
                                    <a href="#">ทรัพยากรธรรมชาติ<span class="fa arrow"></span></a>
                                    <ul class="nav nav-third-level">
                                        <li>
                                            <a href="waterresource.html">ทรัพยากรน้ำ</a>
                                        </li>
                                        <li>
                                            <a href="landresource.html">ทรัพยากรดิน</a>
                                        </li>
                                        <li>
                                            <a href="forrestresource.html">ทรัพยากรป่าไม้</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="polution.html">มลพิษ</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="copy.html"><i class="fa fa-copy"></i> คัดลอกข้อมูล</a>
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
        </nav>
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">ทรัพยากรป่าไม้</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
    <!-- /.panel-heading -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-body">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#listForest" data-toggle="tab">ทรัพยากรป่าไม้</a>
                        </li>                        
                        <li><a href="#addForest" data-toggle="tab">เพิ่มทรัพยากรป่าไม้</a>
                        </li>
                    </ul>
                    <div class="panel-body">

                    <!-- Tab panes -->
                    <div class="tab-content">
                         <div class="tab-pane fade in active" id="listForest">
                        พ.ศ.
                    <select>
                        <option value="2558">2558</option>
                        <option value="2559">2559</option>
                    </select>
                    <br><br>
                            <div class="table-responsive">
                                <table id="resultTable" class="table table-striped table-bordered table-hover">
                                    
                                </table>
                            </div>
                        </div>
                                <div class="tab-pane fade" id="addForest">
                                    <form role="form">
                                            <table width="50%" align="center">  
                                                <tr>
                                                    <td align="pull-right" style="padding: 10px">ปีข้อมูล</td>
                                                    <td><input id="frs_year" maxlength="4" class="form-control" placeholder="" value="2558" name="pipe-year" required="true"></td>
                                                </tr>  
                                                <tr>
                                                    <td align="pull-right" style="padding: 10px">ชื่อ</td>
                                                    <td><input id="frs_name" maxlength="100" class="form-control" placeholder="" name="water-name" required="true"></td>
                                                </tr>
                                                <tr>
                                                    <td align="pull-right" style="padding: 10px">ที่ตั้ง</td>
                                                    <td>
                                                        <select id="villageSelect" class="form-control" name="edu-location">
                                                           
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="pull-right" style="padding: 10px">ประเภทการใช้ประโยชน์</td>
                                                    <td><input id="frs_usage" maxlength="255" class="form-control" placeholder="" name="water-name" required="true"></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" align="center" style="padding: 15px">
                                                    <button type="reset" class="btn btn-default">ล้างข้อมูล</button>
                                                    <input type="button" class="btn btn-default" value="บันทึก" onclick="createForest()" />
                                                    </td>
                                                </tr>
                                            </table>
                                        </form>
                                </div>
                                <div class="tab-pane fade" id="editForest">
                                    <form role="form">
                                    <input type="hidden" id="editFrsId">
                                            <table width="50%" align="center">  
                                                <tr>
                                                    <td align="pull-right" style="padding: 10px">ปีข้อมูล</td>
                                                    <td><input id="editFrsYear" maxlength="4" class="form-control" placeholder="" value="2558" name="pipe-year" required="true"></td>
                                                </tr>  
                                                <tr>
                                                    <td align="pull-right" style="padding: 10px">ชื่อ</td>
                                                    <td><input id="editFrsName" maxlength="100" class="form-control" placeholder="" name="water-name" required="true"></td>
                                                </tr>
                                                <tr>
                                                    <td align="pull-right" style="padding: 10px">ที่ตั้ง</td>
                                                    <td>
                                                        <select id="editVillageSelect" class="form-control" name="edu-location">
                                                           
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="pull-right" style="padding: 10px">ประเภทการใช้ประโยชน์</td>
                                                    <td><input id="editFrsUsage" maxlength="255" class="form-control" placeholder="" name="water-name" required="true"></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" align="center" style="padding: 15px">
                                                    <a href="#listForest" data-toggle="tab"><button class="btn btn-default">ยกเลิก</button></a>
                                                    <input type="button" class="btn btn-default" value="บันทึก" onclick="editForest()" />
                                                    </td>
                                                </tr>
                                            </table>
                                        </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>

    <!-- jQuery -->
    <script src="../vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>

    <!-- DataTables JavaScript -->
    <script src="../vendor/datatables/js/jquery.dataTables.min.js"></script>
    <script src="../vendor/datatables-plugins/dataTables.bootstrap.min.js"></script>
    <script src="../vendor/datatables-responsive/dataTables.responsive.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>

    <!-- Page-Level Demo Scripts - Tables - Use for reference -->
    <script>
    $(document).ready(function() {
        $('#dataTables-example').DataTable({
            responsive: true
        });
    });
    </script>

</body>

</html>
