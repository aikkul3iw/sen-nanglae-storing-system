<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<script type='text/javascript' src="js/jquery.js"></script>
<script type='text/javascript'>
	function listPersonnel() {
		$("#loader").show();
		$.ajax({
			url : "listPersonnel.do",
			type : "POST",
			success : function(data) {
				var html = '';
				for (var i = 0; i < data.length; i++) {
					html += "<tr>";
					html += "<td>" + data[i].per_year + "</td>" + "<td>"
							+ data[i].per_title + "</td>" + "<td>"
							+ data[i].per_firstname + "</td>" + "<td>"
							+ data[i].per_lastname + "</td>" + "<td>"
							+ data[i].per_position + "</td>" + "<td>"
							+ data[i].per_salary + "</td>" + "<td>"
							+ data[i].per_tel_number + "</td>" + "<td>"
							+ data[i].per_address + "</td>" + "<td>"
							+ data[i].per_email + "</td>" + "<td>"
							+ data[i].per_picture + "</td>"
							+ "<td><buttun onclick=\"deletePersonnel("
							+ data[i].per_id + ");\" >Delete</button></td>"
							+ "<td><buttun onclick=\"setEditPersonnel("
							+ data[i].per_id + ");\" >Edit</button></td>";
					html += "</tr>";
				}
				$('#resultTable').html(html);
				$("#loader").hide();
			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
</script>
<script type='text/javascript'>
	function createPersonnel() {
		$("#loader").show();
		var obj = {
			per_id : 0,
			per_year : $('#per_year').val(),
			per_title : $('#per_title').val(),
			per_firstname : $('#per_firstname').val(),
			per_lastname : $('#per_lastname').val(),
			per_position : $('#per_position').val(),
			per_salary : $('#per_salary').val(),
			per_tel_number : $('#per_tel_number').val(),
			per_address : $('#per_address').val(),
			per_email : $('#per_email').val(),
			per_picture : $('#per_picture').val()
		};
		alert(JSON.stringify(obj));
		$.ajax({
			url : "savePersonnel.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				$("#loader").hide();
			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
	function deletePersonnel(id) {
		var obj = {
			per_id : id

		};
		alert(id);
		alert(JSON.stringify(obj));
		$.ajax({
			url : "deletePersonnel.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				location.reload();
			}
		});
	}
	function editPersonnel() {
		var obj = {
			per_id : $("#editPerId").val(),
			per_year : $('#editPerYear').val(),
			per_title : $('#editPerTitle').val(),
			per_firstname : $('#editPerFirstname').val(),
			per_lastname : $('#editPerLastname').val(),
			per_position : $('#editPerPosition').val(),
			per_salary : $('#editPerSalary').val(),
			per_tel_number : $('#editPerTelNumber').val(),
			per_address : $('#editPerAddress').val(),
			per_email : $('#editPerEmail').val(),
			per_picture : $('#editPerPicture').val()
		};
		alert(JSON.stringify(obj));
		$.ajax({
			url : "savePersonnel.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				location.reload();
			},
			error : function(data, status, er) {
				alert('error');
			}
		});
	}
	function setEditPersonnel(per_id) {

		var obj = {
			per_id : per_id
		};

		$.ajax({
			url : "findPersonnel.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert(JSON.stringify(data));
				$("#editPerId").val(data.per_id);
				$("#editPerYear").val(data.per_year);
				$("#editPerTitle").val(data.per_title);
				$("#editPerFirstname").val(data.per_firstname);
				$("#editPerLastname").val(data.per_lastname);
				$("#editPerPosition").val(data.per_position);
				$("#editPerSalary").val(data.per_salary);
				$("#editPerTelNumber").val(data.per_tel_number);
				$("#editPerAddress").val(data.per_address);
				$("#editPerEmail").val(data.per_email);
				$("#editPerPicture").val(data.per_picture);
			},
			error : function(data, status, er) {
				alert('error');
			}
		});
	}
</script>
</head>
<body onload="listPersonnel()">
	<div id="loader" style="display: none">
		<img src="image/ajax-loader.gif" />
	</div>
	<table id="resultTable" border="1"></table>

	<button onclick="listPersonnel()">Fetch All</button>

	<div id="loader" style="display: none">
		<img src="image/ajax-loader.gif" />
	</div>
	<table id="resultTable" border="1"></table>

	<hr />
	Year:
	<input type="text" id="per_year">
	<BR /> Title:
	<input type="text" id="per_title">
	<BR /> First name:
	<input type="text" id="per_firstname">
	<BR /> Last name:
	<input type="text" id="per_lastname">
	<BR /> Position:
	<input type="text" id="per_position">
	<BR /> Salary:
	<input type="text" id="per_salary">
	<BR /> Phone number:
	<input type="text" id="per_tel_number">
	<BR /> Address:
	<input type="text" id="per_address">
	<BR /> Email:
	<input type="text" id="per_email">
	<BR /> Picture:
	<input type="text" id="per_picture">
	<BR />
	<input type="button" value="Save" onclick="createPersonnel()" />

	<hr />
	<input type="hidden" id="editPerId"> Year:
	<input type="text" id="editPerYear">
	<BR /> Title:
	<input type="text" id="editPerTitle">
	<BR /> First name:
	<input type="text" id="editPerFirstname">
	<BR /> Last name:
	<input type="text" id="editPerLastname">
	<BR /> Position:
	<input type="text" id="editPerPosition">
	<BR /> Salary:
	<input type="text" id="editPerSalary">
	<BR /> Phone number:
	<input type="text" id="editPerTelNumber">
	<BR /> Address:
	<input type="text" id="editPerAddress">
	<BR /> Email:
	<input type="text" id="editPerEmail">
	<BR /> Picture:
	<input type="text" id="editPerPicture">
	<BR />
	<input type="button" value="Save" onclick="editPersonnel()" />
</body>
</html>