<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<script type='text/javascript' src="js/jquery.js"></script>
<script type='text/javascript'>
	function listInventory() {
		$("#loader").show();
		$.ajax({
			url : "listInventory.do",
			type : "POST",
			success : function(data) {
				var html = '';
				for (var i = 0; i < data.length; i++) {
					html += "<tr>";
					html += "<td>" + data[i].ivn_year + "</td>" + "<td>"
							+ data[i].ivn_collect + "</td>" + "<td>"
							+ data[i].ivn_gov_provide + "</td>" + "<td>"
							+ data[i].ivn_gor_purchase + "</td>" + "<td>"
							+ data[i].inv_outcome + "</td>"
							+ "<td><buttun onclick=\"deleteInventory("
							+ data[i].ivn_id + ");\" >Delete</button></td>"
							+ "<td><buttun onclick=\"setEditInventory("
							+ data[i].ivn_id + ");\" >Edit</button></td>";
					html += "</tr>";
				}
				$('#resultTable').html(html);
				$("#loader").hide();
			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
</script>
<script type='text/javascript'>
	function createInventory() {
		$("#loader").show();
		var obj = {
			ivn_id : 0,
			ivn_year : $('#ivn_year').val(),
			ivn_collect : $('#ivn_collect').val(),
			ivn_gov_provide : $('#ivn_gov_provide').val(),
			ivn_gor_purchase : $('#ivn_gor_purchase').val(),
			inv_outcome : $('#inv_outcome').val()

		};
		alert(JSON.stringify(obj));
		$.ajax({
			url : "saveInventory.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				$("#loader").hide();
			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
	function deleteInventory(id) {
		var obj = {
			ivn_id : id

		};
		alert(id);
		alert(JSON.stringify(obj));
		$.ajax({
			url : "deleteInventory.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				location.reload();
			}
		});
	}
	function editInventory() {
		var obj = {
			ivn_id : $('#editIvnId').val(),
			ivn_year : $("#editIvnYear").val(),
			ivn_collect : $('#editIvnCollect').val(),
			ivn_gov_provide : $('#editIvnGovProvide').val(),
			ivn_gor_purchase : $('#editIvnGorPurchase').val(),
			inv_outcome : $('#editInvOutcome').val()
		};
		alert(JSON.stringify(obj));
		$.ajax({
			url : "saveInventory.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				location.reload();
			},
			error : function(data, status, er) {
				alert('error');
			}
		});
	}
	function setEditInventory(ivn_id) {

		var obj = {
			ivn_id : ivn_id
		};

		$.ajax({
			url : "findInventory.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert(JSON.stringify(data));
				$("#editIvnId").val(data.ivn_id);
				$("#editIvnYear").val(data.ivn_year);
				$("#editIvnCollect").val(data.ivn_collect);
				$("#editIvnGovProvide").val(data.ivn_gov_provide);
				$("#editIvnGorPurchase").val(data.ivn_gor_purchase);
				$("#editInvOutcome").val(data.inv_outcome);
			},
			error : function(data, status, er) {
				alert('error');
			}
		});
	}
</script>
</head>
<body onload="listInventory();">
	<div id="loader" style="display: none">
		<img src="image/ajax-loader.gif" />
	</div>
	<table id="resultTable" border="1"></table>

	<button onclick="listInventory()">Fetch All</button>

	<div id="loader" style="display: none">
		<img src="image/ajax-loader.gif" />
	</div>
	<table id="resultTable" border="1"></table>

	<hr />
	Year:
	<input type="text" id="ivn_year">
	<BR /> Collect:
	<input type="text" id="ivn_collect">
	<BR /> Provide:
	<input type="text" id="ivn_gov_provide">
	<BR /> Purchase:
	<input type="text" id="ivn_gor_purchase">
	<BR /> Outcome:
	<input type="text" id="inv_outcome">
	<BR />
	<input type="button" value="Save" onclick="createInventory()" />

	<hr />
	<input type="hidden" id="editIvnId"> Year:
	<input type="text" id="editIvnYear">
	<BR /> Collect:
	<input type="text" id="editIvnCollect">
	<BR /> Provide:
	<input type="text" id="editIvnGovProvide">
	<BR /> Purchase:
	<input type="text" id="editIvnGorPurchase">
	<BR /> Outcome:
	<input type="text" id="editInvOutcome">
	<BR />
	<input type="button" value="Save" onclick="editInventory()" />

</body>
</html>