<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<script type='text/javascript' src="js/jquery.js"></script>
<script type='text/javascript'>
	function listEducation() {
		$("#loader").show();
		$.ajax({
			url : "listEducation.do",
			type : "POST",
			success : function(data) {
				var html = '';
				for (var i = 0; i < data.length; i++) {
					html += "<tr>";
					html += "<td>" + data[i].edu_year + "</td>" + "<td>"
							+ data[i].edu_name + "</td>" + "<td>"
							+ data[i].edu_type + "</td>" + "<td>"
							+ data[i].student_m + "</td>" + "<td>"
							+ data[i].student_f + "</td>" + "<td>"
							+ data[i].edu_house_number + "</td>" + "<td>"
							+ data[i].edu_description + "</td>" + "<td>"
							+ data[i].location.vil_name + "</td>"
							+ "<td><buttun onclick=\"deleteEducation("
							+ data[i].edu_id + ");\" >Delete</button></td>"
							+ "<td><buttun onclick=\"setEditEducation("
							+ data[i].edu_id + ");\" >Edit</button></td>";
					html += "</tr>";
				}
				$('#resultTable').html(html);
				$("#loader").hide();
			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
</script>
<script type='text/javascript'>
	function createEducation() {
		$("#loader").show();
		var obj = {
			edu_id : 0,
			edu_year : $('#edu_year').val(),
			edu_name : $('#edu_name').val(),
			edu_type : $('#edu_type').val(),
			student_m : $('#student_m').val(),
			student_f : $('#student_f').val(),
			edu_house_number : $('#edu_house_number').val(),
			edu_description : $('#edu_description').val()

		};
		alert(JSON.stringify(obj));
		$.ajax({
			url : "saveEducation.do?id=" + $("#villageSelect").val(),
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				$("#loader").hide();
			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
	function listVillage() {
		$("#loader").show();
		$.ajax({
			url : "listVillage.do",
			type : "POST",
			success : function(data) {
				var html = '';
				for (var i = 0; i < data.length; i++) {
					html += "<option value=\""+data[i].vil_id+"\">"
							+ data[i].vil_name + "</option>";
				}
				$('#villageSelect').html(html);

			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
	function deleteEducation(id) {
		var obj = {
			edu_id : id

		};
		alert(id);
		alert(JSON.stringify(obj));
		$.ajax({
			url : "deleteEducation.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				location.reload();
			}
		});
	}
	function editEducation() {
		var obj = {
			edu_id : $("#editEduId").val(),
			edu_year : $('#editEduYear').val(),
			edu_name : $('#editEduName').val(),
			edu_type : $('#editEduType').val(),
			student_m : $('#editStudentMale').val(),
			student_f : $('#editStudentFemale').val(),
			edu_house_number : $('#editEduHouseNumber').val(),
			edu_description : $('#editEduDescription').val()
		};
		alert(JSON.stringify(obj));
		$.ajax({
			url : "saveEducation.do?id=" + $("#editVillageSelect").val(),
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert('success');
				location.reload();
			},
			error : function(data, status, er) {
				alert('error');
			}
		});
	}
	function setEditEducation(edu_id) {

		var obj = {
			edu_id : edu_id
		};

		$.ajax({
			url : "findEducation.do",
			type : "POST",
			dataType : "JSON",
			data : JSON.stringify(obj),
			contentType : "application/json",
			mimeType : "application/json",
			success : function(data) {
				alert(JSON.stringify(data));
				$("#editEduId").val(data.edu_id);
				$("#editEduYear").val(data.edu_year);
				$("#editEduName").val(data.edu_name);
				$("#editEduType").val(data.edu_type);
				$("#editStudentMale").val(data.student_m);
				$("#editStudentFemale").val(data.student_f);
				$("#editEduHouseNumber").val(data.edu_house_number);
				$("#editEduDescription").val(data.edu_description);
			},
			error : function(data, status, er) {
				alert('error');
			}
		});
	}
	function editVillageSelect() {
		$("#loader").show();
		$.ajax({
			url : "listVillage.do",
			type : "POST",
			success : function(data) {
				var html = '';
				for (var i = 0; i < data.length; i++) {
					html += "<option value=\""+data[i].vil_id+"\">"
							+ data[i].vil_name + "</option>";
				}
				$('#editVillageSelect').html(html);

			},
			error : function(data, status, er) {
				alert('error');
				$("#loader").hide();
			}
		});
	}
</script>
</head>
<body onload="listEducation();listVillage();editVillageSelect();">
	<div id="loader" style="display: none">
		<img src="image/ajax-loader.gif" />
	</div>
	<table id="resultTable" border="1"></table>

	<button onclick="listEducation()">Fetch All</button>

	<div id="loader" style="display: none">
		<img src="image/ajax-loader.gif" />
	</div>
	<table id="resultTable" border="1"></table>

	<hr />
	Year:
	<input type="text" id="edu_year">
	<BR /> Education Name:
	<input type="text" id="edu_name">
	<BR /> Type:
	<input type="text" id="edu_type">
	<BR /> Student Male:
	<input type="text" id="student_m">
	<BR /> Student Female:
	<input type="text" id="student_f">
	<BR /> House Number:
	<input type="text" id="edu_house_number">
	<BR /> Description:
	<input type="text" id="edu_description">
	<BR /> Location:
	<select id="villageSelect">
	</select>
	<BR />
	<input type="button" value="Save" onclick="createEducation()" />

	<hr />
	<input type="hidden" id="editEduId"> Year:
	<input type="text" id="editEduYear">
	<BR /> Name:
	<input type="text" id="editEduName">
	<BR /> Type:
	<input type="text" id="editEduType">
	<BR /> Student Male:
	<input type="text" id="editStudentMale">
	<BR /> Student Female:
	<input type="text" id="editStudentFemale">
	<BR /> House Number:
	<input type="text" id="editEduHouseNumber">
	<BR /> Description:
	<input type="text" id="editEduDescription">
	<BR /> Location:
	<select id="editVillageSelect">
	</select>
	<BR />
	<input type="button" value="Save" onclick="editEducation()" />

</body>
</html>